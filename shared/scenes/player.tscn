[gd_scene load_steps=25 format=3 uid="uid://c42uvkhabynn0"]

[ext_resource type="Script" uid="uid://c17kxb5ip86i8" path="res://lessons/lesson_02/player_lesson_02.gd" id="1_kvwlh"]
[ext_resource type="Texture2D" uid="uid://cbti6j4pfdmyv" path="res://shared/art/characters/knight/ss_knight_01.png" id="2_u8px6"]

[sub_resource type="Animation" id="Animation_ptsi8"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}

[sub_resource type="Animation" id="Animation_8encf"]
resource_name = "fall"
length = 0.5
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.26666668),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [24, 25]
}

[sub_resource type="Animation" id="Animation_gulr2"]
resource_name = "idle"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0, 0]
}

[sub_resource type="Animation" id="Animation_iliwe"]
resource_name = "jump"
length = 0.3
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.13333333),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [12, 13]
}

[sub_resource type="Animation" id="Animation_6la3a"]
resource_name = "run"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.1998209, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [48, 49, 50, 51, 52, 53, 54, 55]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_iliwe"]
_data = {
&"RESET": SubResource("Animation_ptsi8"),
&"fall": SubResource("Animation_8encf"),
&"idle": SubResource("Animation_gulr2"),
&"jump": SubResource("Animation_iliwe"),
&"run": SubResource("Animation_6la3a")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_iliwe"]
animation = &"fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_gulr2"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_6la3a"]
animation = &"jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ptsi8"]
animation = &"run"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6la3a"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_iliwe"]
advance_mode = 2
advance_condition = &"is_running"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8encf"]
advance_mode = 2
advance_condition = &"is_idling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e1a0l"]
advance_mode = 2
advance_condition = &"is_jumping"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_qdwtr"]
advance_mode = 2
advance_condition = &"is_jumping"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_6271u"]
advance_mode = 2
advance_condition = &"is_falling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fhvwa"]
advance_mode = 2
advance_condition = &"is_falling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3san7"]
advance_mode = 2
advance_condition = &"is_falling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_gulr2"]
advance_mode = 2
advance_condition = &"is_idling"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ptsi8"]
advance_mode = 2
advance_condition = &"is_running"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_e1a0l"]
states/fall/node = SubResource("AnimationNodeAnimation_iliwe")
states/fall/position = Vector2(500.42258, -33.799976)
states/idle/node = SubResource("AnimationNodeAnimation_gulr2")
states/idle/position = Vector2(345, 99.625)
states/jump/node = SubResource("AnimationNodeAnimation_6la3a")
states/jump/position = Vector2(345.50873, -32.799976)
states/run/node = SubResource("AnimationNodeAnimation_ptsi8")
states/run/position = Vector2(500.8277, 98.5)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_6la3a"), "idle", "run", SubResource("AnimationNodeStateMachineTransition_iliwe"), "run", "idle", SubResource("AnimationNodeStateMachineTransition_8encf"), "idle", "jump", SubResource("AnimationNodeStateMachineTransition_e1a0l"), "run", "jump", SubResource("AnimationNodeStateMachineTransition_qdwtr"), "jump", "fall", SubResource("AnimationNodeStateMachineTransition_6271u"), "idle", "fall", SubResource("AnimationNodeStateMachineTransition_fhvwa"), "run", "fall", SubResource("AnimationNodeStateMachineTransition_3san7"), "fall", "idle", SubResource("AnimationNodeStateMachineTransition_gulr2"), "fall", "run", SubResource("AnimationNodeStateMachineTransition_ptsi8")]
graph_offset = Vector2(27.884869, -65.66235)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_8encf"]
graph_offset = Vector2(-388.79987, 172.7998)
nodes/LocomotionStateMachine/node = SubResource("AnimationNodeStateMachine_e1a0l")
nodes/LocomotionStateMachine/position = Vector2(10, 120)
node_connections = [&"output", 0, &"LocomotionStateMachine"]

[node name="BasePlayer" type="CharacterBody2D" node_paths=PackedStringArray("sprite", "anim_tree")]
script = ExtResource("1_kvwlh")
sprite = NodePath("Sprite")
anim_tree = NodePath("AnimationTree")
speed = 120.0
gravity = 1500.0

[node name="Sprite" type="Sprite2D" parent="."]
texture_filter = 1
position = Vector2(0, -4)
texture = ExtResource("2_u8px6")
offset = Vector2(0, -12)
hframes = 12
vframes = 10

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_iliwe")
}
autoplay = "idle"

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_8encf")
anim_player = NodePath("../AnimationPlayer")
parameters/LocomotionStateMachine/conditions/is_falling = false
parameters/LocomotionStateMachine/conditions/is_idling = false
parameters/LocomotionStateMachine/conditions/is_jumping = false
parameters/LocomotionStateMachine/conditions/is_running = false
